<div class="main">
  <div class="allPost">
    @for(item of posts; track item){
    <div class="post">
      <div class="picture-post">
        <div class="image-post">
          <img class="detail-image" [src]="item.image" alt="">
        </div>
      </div>
      <div class="bottom">
        <div class="userInfoReport">
          <div class="user-info">
            <div class="avatar-user">
              <img class="avatar" src="../../../../assets/images/avatar.png" alt="">
            </div>
            <div class="info-post">
              <span class="name-user">GoVegan</span>
              <span class="date">on 15 Oct 2019</span>
            </div>
          </div>
          <div class="more">
            <tui-hosted-dropdown #dropdown [content]="content" [open]="false">
              <button appearance="flat" icon="tuiIconMoreVertical" tuiIconButton type="button"
                [pseudoHover]="dropdown.open || null"></button>
            </tui-hosted-dropdown>
            <ng-template #content let-activeZone>
              <tui-data-list tuiDataListDropdownManager size="s" [tuiActiveZoneParent]="activeZone">
                <button *tuiLet="'Report' as item" tuiOption>
                  <span (click)="showDialog(template)">
                    {{item }}
                  </span>

                  <ng-template #template let-observer>
                    <form [formGroup]="testForm">
                      <h2 class="reportTitle">
                        Report
                      </h2>
                      <div class="line">

                      </div>

                      <span class="selectProblem">
                        Select the problem :
                      </span>
                      @for(item of listReports; track $index; ) {
                      <tui-checkbox-labeled class="checkbox" formControlName="testValue{{$index}}" size="l"
                        (click)="checkBox(item, $index)">
                        {{ item }}
                      </tui-checkbox-labeled>
                      }

                      <form [formGroup]="testForm2">
                        <label tuiLabel="Description Report">
                          <tui-textarea formControlName="testValue1" [tuiTextfieldLabelOutside]="true"></tui-textarea>
                        </label>
                      </form>

                      <div class="btn-report">
                        <button appearance="secondary" size="m" tuiButton type="button" (click)="observer.cancel()">
                          Cancel
                        </button>

                        <button appearance="primary" size="m" tuiButton type="button"
                          (click)="observer.complete(); submit(testForm)">
                          Submit
                        </button>
                      </div>
                    </form>


                  </ng-template>
                </button>
              </tui-data-list>

            </ng-template>


          </div>
        </div>

        <div class="content">
          <p class="description-preview"><span style="color: #0081FF;">{{item.tag}}</span>
            {{item.description}}
          </p>
        </div>
        <div class="reaction">
          <div class="tymAndCmt">
            <button id="heart" icon="tuiIconHeart" tuiIconButton
              [ngClass]="item.isLiked ? 'heartBtnActive' : 'heartBtn'" appearance="flat" type="button"
              (click)="like(item.id)" class="heartBtn tui-space_right-3 tui-space_bottom-3"></button>
            <button id="comment" icon="tuiIconMessageSquare" tuiIconButton appearance="flat" type="button"
              class="tui-space_right-3 tui-space_bottom-3"></button>
          </div>
          <button id="share" icon="tuiIconShare" tuiIconButton appearance="flat" type="button"
            class="tui-space_right-3 tui-space_bottom-3"></button>
        </div>
      </div>
    </div>
    }
  </div>
</div>